// invoice;
import { Actions } from "../index.js";

const body = {
  _id: "63d0e638f358cb2244e67a3b",
  processable: true,
  client_id: "63ce4707338883151a6d6a92",
  client_name: "Amy's Bird Sanctuary",
  comment: "Created from Dashboard by Maram Alshen ",
  creator: {
    _id: "5f32a6061d0b9115aeb2cdc9",
    type: "admin",
    admin: "5f32a6061d0b9115aeb2cdc9",
    name: "Maram Alshen",
  },
  latest: true,
  version: 0,
  business_day: "2023-01-25",
  issue_date: "2023-01-25",
  currency: "JOD",
  serial_number: {
    identifier: "ADM",
    formatted: "INV-ADM-5",
    count: 5,
    _id: "63d0e638f358cb2244e67a3c",
  },
  sync_id: "8b15c8c4-bb9e-45c6-83b5-c4c9008763a4",
  company_namespace: ["quickbooks"],
  promotions: [],
  priceLists: [],
  teams: [],
  is_void: false,
  due_date: "2023-01-25",
  origin_warehouse: "63ce5fc8338883151a6d830e",
  paymentsData: {
    invoice_value: 75000,
    paid: 0,
    balance: 75000,
    payments: [],
    _id: "63d0e638f358cb2244e67a3d",
  },
  consumption: {
    status: "consumed",
    remainder: 0,
    _id: "63d0e638f358cb2244e67a3e",
  },
  status: "unpaid",
  subtotal: 75000,
  discount_amount: 0,
  taxable_subtotal: 75000,
  net_total: 75000,
  tax_amount: 0,
  total: 75000,
  pre_subtotal: 75000,
  pre_discount_amount: 0,
  pre_taxable_subtotal: 75000,
  pre_net_total: 75000,
  pre_tax_amount: 0,
  pre_total: 75000,
  return_subtotal: 0,
  return_discount_amount: 0,
  return_taxable_subtotal: 0,
  return_net_total: 0,
  return_tax_amount: 0,
  return_total: 0,
  deductionRatio: 0,
  deductionFixed: 0,
  totalDeductedTax: 0,
  totalDeduction: 0,
  totalDeductionBeforeTax: 0,
  taxes: { "No Tax": { name: "No Tax", rate: 0, total: 0, type: "N/A" } },
  overwriteTaxExempt: false,
  tax_exempt: false,
  shipping_price: 0,
  shipping_tax: 0,
  shipping_charge: 0,
  payment_charge: 0,
  total_with_charges: 75000,
  transaction_processed: true,
  items: [
    {
      isAdditional: false,
      variant: {
        product_id: "63ce4789bea72dcbcbb45bcf",
        product_name: "Design",
        variant_id: "63ce4789bea72dcbcbb45bd2",
        variant_name: "Design",
        listed_price: 75000,
        variant_local_name: "",
        product_local_name: "Design",
        _id: "63d0e638f358cb2244e67a40",
      },
      qty: 1,
      measureunit: {
        parent: null,
        name: "piece",
        factor: 1,
        disabled: false,
        company_namespace: ["quickbooks"],
        _id: "63ce45db338883151a6d68d6",
      },
      tax: {
        name: "No Tax",
        rate: 0,
        type: "N/A",
        disabled: false,
        _id: "63d0e638f358cb2244e67a42",
      },
      base_unit_qty: 1,
      price: 75000,
      discounted_price: 75000,
      tax_amount: 0,
      tax_total: 0,
      discount_value: 0,
      gross_value: 75000,
      line_total: 75000,
      total_before_tax: 75000,
      modifiers_total: 0,
      modifiers_total_before_tax: 0,
      modifiers_tax_total: 0,
      tax_total_without_modifiers: 0,
      line_total_without_modifiers: 75000,
      total_before_tax_without_modifiers: 75000,
      deductionRatio: 0,
      deductedTax: 0,
      deduction: 0,
      deductionBeforeTax: 0,
      lineTotalAfterDeduction: 75000,
      promotions: {
        isGet: false,
        taken: 0,
        free: 1,
        bookings: [],
        highlight: false,
      },
      used_promotions: [],
      general_promotions: [],
      applicable_promotions: [],
      company_namespace: [],
      class: "invoice",
      _id: "63d0e638f358cb2244e67a3f",
      modifiers_groups: [],
    },
  ],
  return_items: [],
  time: 1674634808556,
  createdAt: "2023-01-25T08:20:08.562Z",
  updatedAt: "2023-01-25T08:20:08.729Z",
  __v: 0,
};

const action = "create_invoice";
const action_sync_id = "b0ed1253-4695-4734-bb5b-7a1a55646d32";
Actions(
  {
    version: "2.0",
    routeKey: "POST /actions",
    rawPath: "/actions",
    rawQueryString: `app=repzo-quickbooks&action=${action}`,
    headers: {
      action_sync_id,
      accept: "*/*",
      "accept-encoding": "gzip, deflate",
      "content-length": "3658",
      "content-type": "application/json",
      host: "staging.marketplace.api.repzo.me",
      "svix-id": "msg_29I1By29ETyPiZ4SNrc99KIg7D6",
      "svix-signature": "v1,OkktM+dibxzeb0M6383POFjBr7DX14HECpBIh17FQnU=",
      "svix-timestamp": "1652785653",
      "user-agent": "Svix-Webhooks/1.4",
      "x-amzn-trace-id": "Root=1-628381f6-0b2c6f346d2eb5d207b582ee",
      "x-forwarded-for": "52.215.16.239",
      "x-forwarded-port": "443",
      "x-forwarded-proto": "https",
    },
    queryStringParameters: {
      action,
      app: "repzo-quickbooks",
    },
    requestContext: {
      accountId: "478266140170",
      apiId: "ulkb1ikop2",
      domainName: "staging.marketplace.api.repzo.me",
      domainPrefix: "staging",
      http: {
        method: "POST",
        path: "/actions",
        protocol: "HTTP/1.1",
        sourceIp: "52.215.16.239",
        userAgent: "Svix-Webhooks/1.4",
      },
      requestId: "SRE-ejb6IAMEPWQ=",
      routeKey: "POST /actions",
      stage: "$default",
      time: "17/May/2022:11:07:34 +0000",
      timeEpoch: 1652785654069,
    },
    body: JSON.stringify(body),
    isBase64Encoded: false,
    oauth2_data: {
      access_token:
        "eyJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiYWxnIjoiZGlyIn0..JIMBlFy08l-0-t4jeZFxRA.sdY5XjnNBvOzUhcl2MdRKFU3eZhgX8cE5FhuDHwiChqhMQu_q6UBSk51iYtAy3iUzgA6IxZ_FjgVZ7gOkOspV5_Wt1C6-urCrV0R3lRA-D6V_wKPjaT2AKGr-AujP2S46ESU3D1CsNAMN1leuDxxNvsK1fp9vI3A7gjVxnSNg7lSBN8ZbjTRYHsW5Ki6XERlx_I2M2pXc13chGbfqMN9hWTYmozcIYZ6ITlBOYFzZAzc1qmcW-QgGHPxRlZ4dNWSHyMd9JO_dPmrNg0r96xNIzbhVbj5BbP9ucwpiawy9r-SPyrb1ActeNpdK636yWj6qdg08KkMBbbFMHmRIIM1Xx6sg01LOXGd7XGweNNUBKIj9fIheDgiaRct1mGnFiUWOZysGU69TdmkApPZZJrp1fFXS__vgTrliLnX6BzXcCHFEbWK5feFWB3MhF69vQHjDSUozaz5zStBetG45fZgUgeXQIPD-tWxFSR-sNQjvUwPTB6QzXQhU4dYas5weYDTtxjuGYJLV-sPpAi1JCK9rjmowW4Sxl2f6lMowqghyQFDFKeZu1rmxGkFFwZ5xyBQfjNpLeEEeS1CH8R_cZc6hE4Uqf72sEWbZJQSQhJF-wCWHclSNzZ49E0MH93rITH7_bd3y2fHQqS_dvTCRSbjER9FBVWzd11fuMXQh1LdX4_enBxfhaQb5j4zjKrgECXUbn4EpvTcCT7yQ4UDWL9ISuGMzRzsoEApZXhWA5M1UoEUh_yBvW4WE3HP9lNzYpdR.1KNdY8ivv9UL66vTd1_InQ",
      realmId: "4620816365268574600",
    },
  },
  {
    env: "staging",
    // oauth2_data: {
    //   access_token:
    //     "eyJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiYWxnIjoiZGlyIn0..JIMBlFy08l-0-t4jeZFxRA.sdY5XjnNBvOzUhcl2MdRKFU3eZhgX8cE5FhuDHwiChqhMQu_q6UBSk51iYtAy3iUzgA6IxZ_FjgVZ7gOkOspV5_Wt1C6-urCrV0R3lRA-D6V_wKPjaT2AKGr-AujP2S46ESU3D1CsNAMN1leuDxxNvsK1fp9vI3A7gjVxnSNg7lSBN8ZbjTRYHsW5Ki6XERlx_I2M2pXc13chGbfqMN9hWTYmozcIYZ6ITlBOYFzZAzc1qmcW-QgGHPxRlZ4dNWSHyMd9JO_dPmrNg0r96xNIzbhVbj5BbP9ucwpiawy9r-SPyrb1ActeNpdK636yWj6qdg08KkMBbbFMHmRIIM1Xx6sg01LOXGd7XGweNNUBKIj9fIheDgiaRct1mGnFiUWOZysGU69TdmkApPZZJrp1fFXS__vgTrliLnX6BzXcCHFEbWK5feFWB3MhF69vQHjDSUozaz5zStBetG45fZgUgeXQIPD-tWxFSR-sNQjvUwPTB6QzXQhU4dYas5weYDTtxjuGYJLV-sPpAi1JCK9rjmowW4Sxl2f6lMowqghyQFDFKeZu1rmxGkFFwZ5xyBQfjNpLeEEeS1CH8R_cZc6hE4Uqf72sEWbZJQSQhJF-wCWHclSNzZ49E0MH93rITH7_bd3y2fHQqS_dvTCRSbjER9FBVWzd11fuMXQh1LdX4_enBxfhaQb5j4zjKrgECXUbn4EpvTcCT7yQ4UDWL9ISuGMzRzsoEApZXhWA5M1UoEUh_yBvW4WE3HP9lNzYpdR.1KNdY8ivv9UL66vTd1_InQ",
    //   realmId: "4620816365268574600",
    // },
    data: {
      Customers: {
        createClientHook: true,
      },
      Products: {
        pullInventoryItems: true,
        pullServiceItems: true,
      },
      Invoices: {
        createInvoiceHook: true,
      },
      Payments: {
        createPaymentHook: true,
      },
      repzoApiKey: "X1PuNnjqyZebWXeIC7q5k866rD3uSOyBPwurqfASB9M",
    },
  }
);
